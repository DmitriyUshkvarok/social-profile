{"version":3,"file":"static/js/156.ccc9fe8f.chunk.js","mappings":"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","sources":["components/AppNavigation/AppNavigation.styled.js","components/AppNavigation/AppNavigation.jsx","components/Container/Container.styled.js","components/Container/Container.jsx","pages/HomePage/HomePage.styled.js","pages/HomePage/HomePage.jsx"],"sourcesContent":["import styled from 'styled-components';\nimport { TfiLayoutGrid3 } from 'react-icons/tfi';\nimport { CgProfile } from 'react-icons/cg';\nimport { AiOutlinePlus } from 'react-icons/ai';\nimport { NavLink } from 'react-router-dom';\n\nexport const StyleNavigation = styled.nav`\n  position: fixed;\n  margin-left: auto;\n  margin-right: auto;\n  bottom: 10px;\n  left: 10px;\n  right: 10px;\n  z-index: 5;\n  background-color: rgba(0, 128, 0, 0.4);\n  box-shadow: 0px 0px 30px 10px rgba(10, 216, 244, 0.6);\n`;\nexport const NavigationList = styled.ul`\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding-top: 15px;\n  padding-bottom: 15px;\n`;\n\nexport const NavigatiomItem = styled.li`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n`;\n\nexport const StyleCgProfile = styled(CgProfile)`\n  fill: currentColor;\n  transition: 0.4s;\n\n  &:hover {\n    color: aqua;\n  }\n`;\n\nexport const StyleAiOutlinePlus = styled(AiOutlinePlus)`\n  fill: currentColor;\n  transition: 0.4s;\n\n  &:hover {\n    fill: aqua;\n  }\n`;\n\nexport const StyleTfiLayoutGrid3 = styled(TfiLayoutGrid3)`\n  fill: currentColor;\n  transition: 0.4s;\n\n  &:hover {\n    fill: aqua;\n  }\n`;\n\nexport const StyleNavigationLink = styled(NavLink)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: gold;\n  border: 1px solid gold;\n  border-radius: 5px;\n  padding: 3px;\n  width: 100%;\n  transition: background-color 0.4s;\n\n  &:hover {\n    border-color: aqua;\n  }\n\n  &.active {\n    color: aqua;\n    border-color: aqua;\n\n    > ${StyleCgProfile}, > ${StyleAiOutlinePlus}, > ${StyleTfiLayoutGrid3} {\n      fill: aqua;\n    }\n  }\n`;\n","import Container from 'components/Container/Container';\nimport {\n  StyleNavigationLink,\n  StyleNavigation,\n  NavigationList,\n  NavigatiomItem,\n  StyleCgProfile,\n  StyleAiOutlinePlus,\n  StyleTfiLayoutGrid3,\n} from './AppNavigation.styled';\nconst AppNavigation = () => {\n  return (\n    <Container>\n      <StyleNavigation>\n        <NavigationList>\n          <NavigatiomItem>\n            <StyleNavigationLink to=\"/Home\">\n              <StyleCgProfile size={30} />\n            </StyleNavigationLink>\n          </NavigatiomItem>\n          <NavigatiomItem>\n            <StyleNavigationLink to=\"/create-post\">\n              <StyleAiOutlinePlus size={30} />\n            </StyleNavigationLink>\n          </NavigatiomItem>\n          <NavigatiomItem>\n            <StyleNavigationLink to=\"/Posts\">\n              <StyleTfiLayoutGrid3 size={30} />\n            </StyleNavigationLink>\n          </NavigatiomItem>\n        </NavigationList>\n      </StyleNavigation>\n    </Container>\n  );\n};\n\nexport default AppNavigation;\n","import styled from 'styled-components';\n\nexport const StyleContainer = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding-left: 10px;\n  padding-right: 10px;\n`;\n","import { StyleContainer } from './Container.styled';\n\nconst Container = ({ children }) => {\n  return <StyleContainer>{children}</StyleContainer>;\n};\n\nexport default Container;\n","import styled from 'styled-components';\nimport { BiLogOut } from 'react-icons/bi';\nimport { AiOutlinePlusCircle, AiOutlineMinusCircle } from 'react-icons/ai';\n\nexport const NoPostBlock = styled.p`\n  margin-top: 20px;\n  text-align: center;\n  font-weight: 500;\n  font-size: 35px;\n  line-height: 1.16;\n  letter-spacing: 0.01em;\n  color: green;\n  text-shadow: 1px 1px 10px orange;\n`;\n\nexport const HeaderProfile = styled.div`\n  position: fixed;\n  top: 10px;\n  left: 10px;\n  right: 10px;\n  z-index: 20;\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: 15px;\n  padding-bottom: 15px;\n  box-shadow: 0px 0px 30px 10px rgba(10, 216, 244, 0.2);\n`;\n\nexport const HeaderProfileTitle = styled.h3`\n  width: 100px;\n  margin-left: auto;\n  margin-right: auto;\n  text-align: center;\n  text-transform: uppercase;\n  text-shadow: 0px 0px 20px #28a745;\n  color: #28a745;\n  letter-spacing: 2px;\n`;\n\nexport const LogoutWrapper = styled.div`\n  margin-right: 10px;\n  cursor: pointer;\n`;\n\nexport const StyleBiLogOut = styled(BiLogOut)`\n  fill: #28a745;\n  transition: 0.4s;\n\n  &:hover {\n    fill: #ff4c00;\n  }\n`;\n\nexport const MainPostProfileWrapper = styled.div`\n  margin-top: 75px;\n  max-height: 600px;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 0.5em;\n    background-color: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: transparent;\n  }\n`;\n\nexport const UserPhotoWrapper = styled.div`\n  position: relative;\n  max-width: 250px;\n  height: 250px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 10px;\n  padding: 5px;\n  background-image: var(--background-body);\n  border-radius: 25px;\n`;\n\nexport const IconContainer = styled.div`\n  width: 100%;\n`;\n\nexport const StyleAiOutlinePlusCircle = styled(AiOutlinePlusCircle)`\n  position: absolute;\n  bottom: 10px;\n  right: -15px;\n  fill: gold;\n  cursor: pointer;\n`;\n\nexport const StyleAiOutlineMinusCircle = styled(AiOutlineMinusCircle)`\n  position: absolute;\n  bottom: 10px;\n  right: -15px;\n  fill: red;\n  cursor: pointer;\n`;\n\nexport const NameUser = styled.p`\n  margin-top: 20px;\n  margin-bottom: 10px;\n  text-align: center;\n  font-weight: 500;\n  font-size: 30px;\n  line-height: 1.16;\n  letter-spacing: 0.01em;\n  color: green;\n  text-shadow: 1px 1px 10px orange;\n`;\n\nexport const ImgUserAvatar = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 20px;\n`;\n\nexport const EmailUser = styled.p`\n  text-align: center;\n  font-size: 20px;\n  line-height: 1.16;\n  letter-spacing: 0.01em;\n  color: green;\n  text-shadow: 1px 1px 10px orange;\n  margin-bottom: 10px;\n`;\n\nexport const ProfilPostList = styled.ul`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 25px;\n  margin-bottom: 90px;\n`;\n\nexport const ProfilListItem = styled.li`\n  width: 100%;\n  max-width: 320px;\n  height: 320px;\n  border-radius: 10px;\n`;\n\nexport const ImgPostProfile = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 10px;\n`;\n\nexport const ProfilePostTitle = styled.h3`\n  margin-top: 2px;\n  margin-bottom: 5px;\n  font-size: 14px;\n  font-weight: 700;\n  color: green;\n  text-shadow: 1px 1px 10px orange;\n`;\n","import {\n  NoPostBlock,\n  HeaderProfile,\n  HeaderProfileTitle,\n  LogoutWrapper,\n  StyleBiLogOut,\n  MainPostProfileWrapper,\n  UserPhotoWrapper,\n  IconContainer,\n  StyleAiOutlineMinusCircle,\n  StyleAiOutlinePlusCircle,\n  NameUser,\n  ImgUserAvatar,\n  EmailUser,\n  ProfilPostList,\n  ProfilListItem,\n  ImgPostProfile,\n  ProfilePostTitle,\n} from './HomePage.styled';\nimport { authSignOutUser, authUpdateProfile } from 'redux/auth/authOperation';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport Notiflix from 'notiflix';\nimport Container from 'components/Container/Container';\nimport AppNavigation from 'components/AppNavigation/AppNavigation';\nimport authSelector from 'redux/auth/authSelector';\nimport { useState, useRef, useEffect } from 'react';\nimport {\n  ref,\n  getDownloadURL,\n  uploadBytes,\n  deleteObject,\n} from 'firebase/storage';\nimport { storage } from '../../firebase/config';\nimport { auth } from '../../firebase/config';\nimport { collection, query, getDocs, where, orderBy } from 'firebase/firestore';\nimport { firestore } from '../../firebase/config';\n\nconst HomePage = () => {\n  const [avatarURL, setAvatarURL] = useState(null);\n  const [showDeleteIcon, setShowDeleteIcon] = useState(false);\n  const [post, setPost] = useState([]);\n\n  const dispatch = useDispatch();\n\n  const navigate = useNavigate();\n\n  const name = useSelector(authSelector.getName);\n  const email = useSelector(authSelector.getEmail);\n  const avatar = useSelector(authSelector.getAvatar);\n  const userId = useSelector(authSelector.getUserId);\n\n  const fileInputRef = useRef(null);\n\n  useEffect(() => {\n    if (avatar) {\n      setAvatarURL(avatar);\n      setShowDeleteIcon(true);\n    } else {\n      setAvatarURL(null);\n      setShowDeleteIcon(false);\n      setAvatarURL(null);\n    }\n  }, [avatar]);\n\n  useEffect(() => {\n    const fetchPostById = async () => {\n      const postCollectionIdRef = collection(firestore, 'userPost');\n      const postQueryId = query(\n        postCollectionIdRef,\n        where('currentUserId', '==', userId),\n        orderBy('createdAt')\n      );\n      const snapshot = await getDocs(postQueryId);\n      const fetchedPostId = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      setPost(fetchedPostId.reverse());\n    };\n    fetchPostById();\n  }, [userId]);\n\n  const handleFileChange = async event => {\n    const file = event.target.files[0];\n    if (file) {\n      try {\n        const storageRef = ref(storage, `userAvatar/${file.name}`);\n        await uploadBytes(storageRef, file);\n\n        const downloadURL = await getDownloadURL(storageRef);\n        setAvatarURL(downloadURL);\n        setShowDeleteIcon(true);\n        await dispatch(authUpdateProfile({ login: name, userAvatar: file }));\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  const deleteProfilePhoto = async () => {\n    try {\n      const user = await auth.currentUser;\n      const storageRef = ref(storage, `userAvatar/${user.uid}`);\n\n      // Установка метаданных файла, чтобы он был удален\n      await deleteObject(storageRef);\n\n      // Обновление профиля пользователя без аватара\n      await dispatch(authUpdateProfile({ login: name, userAvatar: null }));\n      setAvatarURL(null);\n      setShowDeleteIcon(false);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const logOut = () => {\n    Notiflix.Confirm.show(\n      'Confirmation',\n      'Are you sure you want to log out?',\n      'Yes',\n      'No',\n      () => {\n        dispatch(authSignOutUser());\n        navigate('/Login');\n      },\n      () => {}\n    );\n  };\n\n  return (\n    <Container>\n      <HeaderProfile>\n        <HeaderProfileTitle>Profile</HeaderProfileTitle>\n        <LogoutWrapper>\n          <StyleBiLogOut size={30} onClick={logOut} />\n        </LogoutWrapper>\n      </HeaderProfile>\n      <MainPostProfileWrapper>\n        <NameUser>{name}</NameUser>\n        <UserPhotoWrapper>\n          {avatarURL && <ImgUserAvatar src={avatarURL} alt=\"userAvatar\" />}\n          <IconContainer>\n            {avatarURL && showDeleteIcon && (\n              <StyleAiOutlineMinusCircle\n                size={30}\n                onClick={deleteProfilePhoto}\n              />\n            )}\n\n            {!avatarURL && !showDeleteIcon && (\n              <StyleAiOutlinePlusCircle\n                size={30}\n                onClick={() => fileInputRef.current.click()}\n              />\n            )}\n\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              style={{ display: 'none' }}\n              onChange={handleFileChange}\n            />\n          </IconContainer>\n        </UserPhotoWrapper>\n        <EmailUser>{email}</EmailUser>\n        {post.length === 0 ? (\n          <NoPostBlock>No posts found.</NoPostBlock>\n        ) : (\n          <ProfilPostList>\n            {post.map(post => (\n              <ProfilListItem key={post.id}>\n                <ImgPostProfile src={post.imageURL} alt=\"Post\" loading=\"lazy\" />\n                <ProfilePostTitle>{post.title}</ProfilePostTitle>\n              </ProfilListItem>\n            ))}\n          </ProfilPostList>\n        )}\n        <AppNavigation />\n      </MainPostProfileWrapper>\n    </Container>\n  );\n};\n\nexport default HomePage;\n"],"names":["StyleNavigation","styled","NavigationList","NavigatiomItem","StyleCgProfile","CgProfile","StyleAiOutlinePlus","AiOutlinePlus","StyleTfiLayoutGrid3","TfiLayoutGrid3","StyleNavigationLink","NavLink","Container","to","size","StyleContainer","children","NoPostBlock","HeaderProfile","HeaderProfileTitle","LogoutWrapper","StyleBiLogOut","BiLogOut","MainPostProfileWrapper","UserPhotoWrapper","IconContainer","StyleAiOutlinePlusCircle","AiOutlinePlusCircle","StyleAiOutlineMinusCircle","AiOutlineMinusCircle","NameUser","ImgUserAvatar","EmailUser","ProfilPostList","ProfilListItem","ImgPostProfile","ProfilePostTitle","useState","avatarURL","setAvatarURL","showDeleteIcon","setShowDeleteIcon","post","setPost","dispatch","useDispatch","navigate","useNavigate","name","useSelector","authSelector","email","avatar","userId","fileInputRef","useRef","useEffect","fetchPostById","postCollectionIdRef","collection","firestore","postQueryId","query","where","orderBy","getDocs","snapshot","fetchedPostId","docs","map","doc","id","data","reverse","handleFileChange","event","file","target","files","storageRef","ref","storage","uploadBytes","getDownloadURL","downloadURL","authUpdateProfile","login","userAvatar","console","log","deleteProfilePhoto","auth","user","uid","deleteObject","onClick","Notiflix","authSignOutUser","src","alt","current","click","type","accept","style","display","onChange","length","imageURL","loading","title","AppNavigation"],"sourceRoot":""}